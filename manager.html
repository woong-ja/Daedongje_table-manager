<script>
    // ... (기존 코드)

    function showModal(tableId) {
      const tableData = tables[tableId];
      modalTableId.textContent = tableId;
      modalOrderList.innerHTML = '';
      
      if (tableData.orders && tableData.orders.length > 0) {
        // 주문 내역을 시간대별로 그룹화하여 표시
        tableData.orders.forEach((order, index) => {
          const orderTitle = document.createElement('h4');
          orderTitle.style.marginTop = '10px';
          orderTitle.style.marginBottom = '5px';
          orderTitle.textContent = `주문 #${index + 1} (${order.time})`;
          modalOrderList.appendChild(orderTitle);

          const orderItemsList = document.createElement('ul');
          orderItemsList.style.listStyle = 'disc';
          orderItemsList.style.paddingLeft = '20px';

          if (order.items) {
            for (const itemName in order.items) {
              const item = order.items[itemName];
              const li = document.createElement('li');
              li.textContent = `${itemName} x ${item.quantity}`;
              orderItemsList.appendChild(li);
            }
          }
          modalOrderList.appendChild(orderItemsList);
        });
      } else {
        modalOrderList.innerHTML = '<li>주문 내역 없음</li>';
      }

      modalTotalPrice.textContent = tableData.totalPrice.toLocaleString('ko-KR');

      confirmButton.style.display = 'none';
      checkoutButton.style.display = 'none';

      if (tableData.status === 'pending') {
        confirmButton.style.display = 'block';
      } else if (tableData.status === 'occupied') {
        checkoutButton.style.display = 'block';
      }

      modal.style.display = "flex";
    }

    // ... (나머지 코드)
</script>